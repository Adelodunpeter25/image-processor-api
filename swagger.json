{
  "swagger": "2.0",
  "info": {
    "title": "Image Processor API",
    "description": "API for image upload, transformation, and management",
    "version": "1.0.0"
  },
  "host": "localhost:5000",
  "basePath": "/api",
  "schemes": ["http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "JWT Authorization header using the Bearer scheme. Example: 'Bearer {token}'"
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": ["Home"],
        "summary": "Home route",
        "responses": {
          "200": { "description": "Home page accessed successfully" }
        }
      },
      "head": {
        "tags": ["Home"],
        "summary": "Home route HEAD request",
        "responses": {
          "200": { "description": "Home page accessed successfully" }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register a new user",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["email", "password"],
              "properties": {
                "email": { "type": "string", "example": "user@example.com" },
                "password": { "type": "string", "example": "password123" }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "User registered successfully" },
          "400": { "description": "Validation error" }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Login and get JWT token",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["email", "password"],
              "properties": {
                "email": { "type": "string", "example": "user@example.com" },
                "password": { "type": "string", "example": "password123" }
              }
            }
          }
        ],
        "responses": {
          "200": { "description": "Login successful" },
          "401": { "description": "Invalid credentials" }
        }
      }
    },
    "/images/upload": {
      "post": {
        "tags": ["Images"],
        "summary": "Upload an image",
        "security": [{ "Bearer": [] }],
        "consumes": ["multipart/form-data"],
        "parameters": [
          {
            "in": "formData",
            "name": "file",
            "type": "file",
            "required": true,
            "description": "Image file (png, jpg, jpeg, gif, webp)"
          }
        ],
        "responses": {
          "201": { "description": "Image uploaded successfully" },
          "400": { "description": "Validation error" },
          "401": { "description": "Unauthorized" }
        }
      }
    },
    "/images/{image_id}": {
      "get": {
        "tags": ["Images"],
        "summary": "Get original image",
        "security": [{ "Bearer": [] }],
        "parameters": [
          { "in": "path", "name": "image_id", "type": "integer", "required": true },
          { "in": "query", "name": "download", "type": "boolean", "default": false }
        ],
        "responses": {
          "200": { "description": "Image file" },
          "404": { "description": "Image not found" }
        }
      },
      "delete": {
        "tags": ["Images"],
        "summary": "Delete an image",
        "security": [{ "Bearer": [] }],
        "parameters": [
          { "in": "path", "name": "image_id", "type": "integer", "required": true }
        ],
        "responses": {
          "200": { "description": "Image deleted successfully" },
          "404": { "description": "Image not found" }
        }
      }
    },
    "/images/{image_id}/transform": {
      "get": {
        "tags": ["Images"],
        "summary": "Transform an image",
        "security": [{ "Bearer": [] }],
        "parameters": [
          { "in": "path", "name": "image_id", "type": "integer", "required": true },
          { "in": "query", "name": "width", "type": "integer" },
          { "in": "query", "name": "height", "type": "integer" },
          { "in": "query", "name": "format", "type": "string", "enum": ["jpeg", "png", "webp"] },
          { "in": "query", "name": "quality", "type": "integer", "default": 85 },
          { "in": "query", "name": "crop_x", "type": "integer" },
          { "in": "query", "name": "crop_y", "type": "integer" },
          { "in": "query", "name": "crop_width", "type": "integer" },
          { "in": "query", "name": "crop_height", "type": "integer" },
          { "in": "query", "name": "rotate", "type": "integer", "enum": [90, 180, 270] },
          { "in": "query", "name": "watermark", "type": "string" },
          { "in": "query", "name": "optimize", "type": "boolean" },
          { "in": "query", "name": "enhance", "type": "boolean" },
          { "in": "query", "name": "compress", "type": "boolean" },
          { "in": "query", "name": "grayscale", "type": "boolean" },
          { "in": "query", "name": "download", "type": "boolean", "default": false }
        ],
        "responses": {
          "200": { "description": "Transformed image" },
          "404": { "description": "Image not found" }
        }
      }
    },
    "/images/{image_id}/thumbnail": {
      "get": {
        "tags": ["Images"],
        "summary": "Generate thumbnail",
        "security": [{ "Bearer": [] }],
        "parameters": [
          { "in": "path", "name": "image_id", "type": "integer", "required": true },
          { "in": "query", "name": "size", "type": "string", "default": "150x150" },
          { "in": "query", "name": "download", "type": "boolean", "default": false }
        ],
        "responses": {
          "200": { "description": "Thumbnail image" },
          "404": { "description": "Image not found" }
        }
      }
    },
    "/images/{image_id}/remove-background": {
      "get": {
        "tags": ["Images"],
        "summary": "Remove background from image",
        "security": [{ "Bearer": [] }],
        "parameters": [
          { "in": "path", "name": "image_id", "type": "integer", "required": true },
          { "in": "query", "name": "format", "type": "string", "enum": ["png", "webp"] },
          { "in": "query", "name": "download", "type": "boolean", "default": false }
        ],
        "responses": {
          "200": { "description": "Image with background removed" },
          "404": { "description": "Image not found" }
        }
      }
    },
    "/images": {
      "get": {
        "tags": ["Images"],
        "summary": "List all user images",
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": { "description": "List of images" }
        }
      }
    },
    "/batch/upload": {
      "post": {
        "tags": ["Batch Processing"],
        "summary": "Upload multiple images at once",
        "security": [{"Bearer": []}],
        "consumes": ["multipart/form-data"],
        "parameters": [
          {"in": "formData", "name": "files", "type": "file", "required": true, "description": "Multiple image files (max 10)"}
        ],
        "responses": {
          "201": {"description": "Images uploaded successfully"},
          "400": {"description": "Invalid request"}
        }
      }
    },
    "/batch/transform": {
      "post": {
        "tags": ["Batch Processing"],
        "summary": "Apply same transformation to multiple images",
        "security": [{"Bearer": []}],
        "parameters": [
          {"in": "body", "name": "body", "required": true, "schema": {
            "type": "object",
            "required": ["image_ids"],
            "properties": {
              "image_ids": {"type": "array", "items": {"type": "integer"}, "description": "Array of image IDs (max 10)"},
              "width": {"type": "integer"},
              "height": {"type": "integer"},
              "format": {"type": "string", "enum": ["jpeg", "png", "webp"]},
              "quality": {"type": "integer", "minimum": 1, "maximum": 100},
              "rotate": {"type": "integer", "enum": [90, 180, 270]},
              "watermark": {"type": "string"},
              "optimize": {"type": "boolean"},
              "enhance": {"type": "boolean"},
              "compress": {"type": "boolean"},
              "grayscale": {"type": "boolean"}
            }
          }}
        ],
        "responses": {
          "200": {"description": "ZIP file with transformed images"},
          "400": {"description": "Invalid request"}
        }
      }
    },
    "/batch/remove-background": {
      "post": {
        "tags": ["Batch Processing"],
        "summary": "Remove background from multiple images",
        "security": [{"Bearer": []}],
        "parameters": [
          {"in": "body", "name": "body", "required": true, "schema": {
            "type": "object",
            "required": ["image_ids"],
            "properties": {
              "image_ids": {"type": "array", "items": {"type": "integer"}, "description": "Array of image IDs (max 10)"},
              "format": {"type": "string", "enum": ["png", "webp"], "default": "png"}
            }
          }}
        ],
        "responses": {
          "200": {"description": "ZIP file with background removed images"},
          "400": {"description": "Invalid request"}
        }
      }
    }
  }
}
